<!DOCTYPE html>
<html>
<head>
	<title>The Story of Adachi High School</title>
	<meta charset="utf-8" />

	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="anonymous"></script>

	<!-- jquery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

	<!-- stylesheets -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="anonymous" />
	<link rel="stylesheet" href="style.css">

</head>
<body>

	<div class="header">
		<img src="images/me.png" width=120>
	</div>
	<div class="sidebar"></div>
	<div class="content">

		<div id="map"></div>

		<script>

			// let's create some data
			const data = [

				{
					'id': 0,
					'title':'Hello Adachi High School',
					'latlon': [35.77073084847737, 139.80474988826705],
					'image': 'images/adachi.png'
				},
				
				{
					'id': 1,
					'title':'Hello ななか',
					'latlon':[35.7999474, 139.7810238],
					'image': ''
				},
				
				{
					'id': 2,
					'title':'Hello あらい',
					'latlon':[35.8052787, 139.7705562],
					'image': ''
				},
				
				{
					'id': 3,
					'title':'Hello そら',
					'latlon':[35.8050435, 139.8198391],
					'image': ''
				},
				
				{
					'id': 4,
					'title':'Hello とんとん',
					'latlon':[35.7904581, 139.8194455],
					'image': ''
				},
				
				{
					'id': 5,
					'title':'Hello はやと',
					'latlon':[35.7636337, 139.8308211],
					'image': ''
				},
				
				{
					'id': 6,
					'title':'Hello 小島',
					'latlon':[35.770090,139.795381],
					'image': ''
				},
				
				{
					'id': 7,
					'title':'Hello 健一',
					'latlon':[35.780002,139.769000],
					'image': ''
				},
				
				{
					'id': 8,
					'title':'Hello きる',
					'latlon':[35.7902250, 139.8245105],
					'image': ''
				},
				
				{
					'id': 9,
					'title':'Hello えの',
					'latlon':[35.7692361, 139.8516475],
					'image': ''
				},
				
				{
					'id': 10,
					'title':'Hello としき',
					'latlon':[35.7149467, 139.8115313],
					'image': ''
				},
				
				{
					'id': 11,
					'title':'Hello しん',
					'latlon':[35.772650,139.792522],
					'image': ''
				},
				
				{
					'id': 12,
					'title':'Hello ゆうすけ',
					'latlon':[35.7927801, 139.8403558],
					'image': ''
				},
				
				{
					'id': 13,
					'title':'Hello まりえ',
					'latlon':[35.8018982, 139.8071531],
					'image': ''
				},
				
				{
					'id': 14,
					'title':'Hello Ryuto',
					'latlon':[33.51276,131.51604],
					'image': ''
				},
				
				
				
			]

			var map = L.map('map').setView([0,0], 2);

			// add a satellite basemap from mapbox
			let satellitecolor = L.tileLayer('https://api.mapbox.com/styles/v1/yohman/ckrh25hug05w018ndot6lycob/tiles/512/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoieW9obWFuIiwiYSI6IkxuRThfNFkifQ.u2xRJMiChx914U7mOZMiZw', 
			{
				attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox/yohman</a>',
				maxZoom: 18,
				tileSize: 512,
				zoomOffset: -1,
				accessToken: 'pk.eyJ1IjoieW9obWFuIiwiYSI6IkxuRThfNFkifQ.u2xRJMiChx914U7mOZMiZw'
			}).addTo(map)
			
			// create layer group
			var places = L.featureGroup()

			// loop through data
			data.forEach(function(item,index){
				console.log(item,index)
				// add marker to map
				places.addLayer(L.marker(item.latlon)
					.bindPopup(item.title))

				// add marker to sidebar
				$('.sidebar').append('<div class="sidebar-item" onclick="goto('+item.id+')"><b>'+item.title+'</b><p><img src="'+item.image+'" width=100%></p></div>')
			})
			
			// add layer to map
			places.addTo(map)
			
			// map.fitBounds()
			map.fitBounds(places.getBounds())

			function goto(id){
				console.log(id)
				// map.flyTo([data[id].lat,data[id].lon],10)
				map.flyTo(data[id].latlon,17)
			}

		</script>	

	</div>

</body>
</html>
